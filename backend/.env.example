# =============================================================================
# Quater Backend Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# System Admin Configuration
# -----------------------------------------------------------------------------
# System Admin User ID (required for authorization system)
# This is the GUID of the system administrator user account
SYSTEM_ADMIN_USER_ID=eb4b0ebc-7a02-43ca-a858-656bd7e4357f

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=quater_production
DB_USER=quater_app
DB_PASSWORD=your-strong-password-here

# Full connection string (alternative to individual vars)
DB_CONNECTION_STRING=Host=${DB_HOST};Port=${DB_PORT};Database=${DB_NAME};Username=${DB_USER};Password=${DB_PASSWORD};SSL Mode=Require;Trust Server Certificate=false

# -----------------------------------------------------------------------------
# OpenIddict OAuth2/OIDC Configuration
# -----------------------------------------------------------------------------
OPENIDDICT_ISSUER=https://api.yourdomain.com
OPENIDDICT_AUDIENCE=quater-api

# Token lifetimes (in seconds)
OPENIDDICT_ACCESS_TOKEN_LIFETIME=3600
OPENIDDICT_REFRESH_TOKEN_LIFETIME=604800
OPENIDDICT_REFRESH_TOKEN_REUSE_LEEWAY=30

# Certificate paths (use environment variables for flexibility)
# For Docker: mount certificates to /app/certs/ or use Infisical to inject paths
OPENIDDICT_ENCRYPTION_CERT_PATH=/app/certs/encryption.pfx
OPENIDDICT_SIGNING_CERT_PATH=/app/certs/signing.pfx

# Certificate passwords (store in Infisical or secrets manager)
OPENIDDICT_ENCRYPTION_CERT_PASSWORD=your-encryption-cert-password
OPENIDDICT_SIGNING_CERT_PASSWORD=your-signing-cert-password

# OAuth2 Client Credentials (for mobile/desktop apps)
# Generate using: openssl rand -base64 48
OPENIDDICT_CLIENT_ID=quater-mobile-client
OPENIDDICT_CLIENT_SECRET=your-64-character-client-secret-here

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------
EMAIL_SMTP_HOST=smtp.sendgrid.net
EMAIL_SMTP_USERNAME=apikey
EMAIL_SMTP_PASSWORD=your-sendgrid-api-key
EMAIL_FROM_ADDRESS=noreply@yourdomain.com
EMAIL_FROM_NAME=Quater Water Quality
EMAIL_FRONTEND_URL=https://app.yourdomain.com

# -----------------------------------------------------------------------------
# Redis Configuration (for rate limiting)
# -----------------------------------------------------------------------------
REDIS_CONNECTION_STRING=localhost:6379,password=your-redis-password,ssl=false,abortConnect=false

# For production with SSL:
# REDIS_CONNECTION_STRING=redis-server.yourdomain.com:6379,password=your-redis-password,ssl=true,abortConnect=false

# -----------------------------------------------------------------------------
# CORS Configuration (allowed origins)
# -----------------------------------------------------------------------------
CORS_ORIGIN_1=https://app.yourdomain.com
CORS_ORIGIN_2=https://admin.yourdomain.com
CORS_ORIGIN_3=https://mobile.yourdomain.com

# For development, you can use:
# CORS_ORIGIN_1=http://localhost:5173
# CORS_ORIGIN_2=http://localhost# CORS_ORIGIN_3=http://localhost:8080

# -----------------------------------------------------------------------------
# ASP.NET Core Configuration
# -----------------------------------------------------------------------------
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://+:5000

# For development:
# ASPNETCORE_ENVIRONMENT=Development
# ASPNETCORE_URLS=http://localhost:5000;https://localhost:5001

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
RATELIMIICATED_LIMIT=60
RATELIMITING_ANONYMOUS_LIMIT=10
RATELIMITING_WINDOW_SECONDS=60

# -----------------------------------------------------------------------------
# Optional: Logging Configuration
# -----------------------------------------------------------------------------
# Serilog minimum level (override in appsettings.json)
# SERILOG_MINIMUM_LEVEL=Information

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. For production, use Infisical, Azure Key Vault, AWS Secrets Manager, or similar
# 2. Never commit actual secrets to version control
# 3. Rotate passwords and API keys regularly
# 4. Use strong passwords (min 16 characters, mixed case, numbers, symbols)
# 5. Enable SSL/TLS for all external connections in production
# 6. Generate certificates using: backend/scripts/generate-openiddict-certs.sh
# 7. Store certificates securely in Infisical (see backend/docs/INFISICAL_SETUP.md)
# =============================================================================

# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=quater_production
DB_USER=quater_app
DB_PASSWORD=your-strong-password-here

# Full connection string (alternative to individual vars)
DB_CONNECTION_STRING=Host=${DB_HOST};Port=${DB_PORT};Database=${DB_NAME};Username=${DB_USER};Password=${DB_PASSWORD};SSL Mode=Require;Trust Server Certificate=false

# -----------------------------------------------------------------------------
# OpenIddict OAuth2/OIDC Configuration
# -----------------------------------------------------------------------------
OPENIDDICT_ISSUER=https://api.yourdomain.com
OPENIDDICT_AUDIENCE=quater-api

# Certificate passwords (for production, store in Key Vault/Secrets Manager)
OPENIDDICT_ENCRYPTION_CERT_PASSWORD=your-encryption-cert-password
OPENIDDICT_SIGNING_CERT_PASSWORD=your-signing-cert-password

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------
EMAIL_SMTP_HOST=smtp.sendgrid.net
EMAIL_SMTP_USERNAME=apikey
EMAIL_SMTP_PASSWORD=your-sendgrid-api-key
EMAIL_FROM_ADDRESS=noreply@yourdomain.com
EMAIL_FROM_NAME=Quater Water Quality
EMAIL_FRONTEND_URL=https://app.yourdomain.com

# -----------------------------------------------------------------------------
# Redis Configuration (for rate limiting)
# -----------------------------------------------------------------------------
REDIS_CONNECTION_STRING=localhost:6379,password=your-redis-password,ssl=false,abortConnect=false

# For production with SSL:
# REDIS_CONNECTION_STRING=rediserver.yourdomain.com:6379,password=your-redis-password,ssl=true,abortConnect=false

# -----------------------------------------------------------------------------
# CORS Configuration (allowed origins)
# -----------------------------------------------------------------------------
CORS_ORIGIN_1=https://app.yourdomain.com
CORS_ORIGIN_2=https://admin.yourdomain.com
CORS_ORIGIN_3=https://mobile.yourdomain.com

# For development, you can use:
# CORS_ORIGIN_1=http://localhost:5173
# CORS_ORIGIN_2=http://localhost:3000
# CORS_ORIGIN_3=http://localhost:8080

# -----------------------------------------------------------------------------
# ASP.NET Core Configuration
# -----------------------------------------------------------------------------
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://+:5000

# For development:
# ASPNETCORE_ENVIRONMENT=Development
# ASPNETCORE_URLS=http://localhost:5000;https://localhost:5001

# -----------------------------------------------------------------------------
# Optional: Logging Configuration
# -----------------------------------------------------------------------------
# Serilog minimum level (override in appsettings.json)
# SERILOG_MINIMUM_LEVEL=Information

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. For production, use Azure Key Vault, AWS Secrets Manager, or similar
# 2. Never commit actual secrets to version control
# 3. Rotate passwords and API keys regularly
# 4. Use strong passwords (min 16 characters, mixed case, numbers, symbols)
# 5. Enable SSL/TLS for all external connections in production
# =============================================================================
